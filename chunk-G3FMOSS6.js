import{a as H,b as m,c as M,d as j,e as D,f as p,g as B,h as L,i as z,j as J,k as K,l as Q,m as W,n as X}from"./chunk-A25HTZXZ.js";import{a as S}from"./chunk-LGQEV6BK.js";import{l as G,m as A}from"./chunk-MJ7E4EBO.js";import{$ as v,Ha as u,Hb as o,Jb as f,Na as U,P as N,Sa as V,T as w,U as k,_ as x,a as h,b as I,ga as T,ib as s,jb as b,kb as O,lb as $,mb as q,nb as y,ob as i,pb as e,qa as R,qb as _,wb as F,yb as P,zb as a}from"./chunk-DCIY6CH7.js";var E=class n{constructor(t){this._HttpClient=t}getProducts(t){return this._HttpClient.get(`${S.apiUrl}/products?userId=${t}`)}addProduct(t){return this._HttpClient.post(`${S.apiUrl}/products`,t)}updateProduct(t,r){return this._HttpClient.put(`${S.apiUrl}/products/${t}`,r)}deleteProduct(t){return this._HttpClient.delete(`${S.apiUrl}/products/${t}`)}static \u0275fac=function(r){return new(r||n)(w(A))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function et(n,t){n&1&&(i(0,"p",5),o(1,"*Product Name Is Empty"),e())}function rt(n,t){n&1&&(i(0,"p",5),o(1,"*Product Category Is Empty"),e())}function it(n,t){n&1&&(i(0,"p",5),o(1,"*Product Price Is Empty"),e())}function ot(n,t){n&1&&(i(0,"p",5),o(1,"*Product Stock Number Is Empty"),e())}function nt(n,t){if(n&1&&(i(0,"div",21)(1,"h2",25),o(2),e(),i(3,"h3",26)(4,"span",27),o(5,"Category:"),e(),o(6),e(),i(7,"p",28),o(8),e(),i(9,"p",29)(10,"span",27),o(11,"Stock:"),e(),o(12),e()()),n&2){let r=a().$implicit;u(2),f(" ",r.productName),u(4),f(" ",r.productCategory),u(2),f("",r.productPrice,"$"),u(4),f(" ",r.productStock)}}function dt(n,t){if(n&1&&(i(0,"div",22),_(1,"input",30),i(2,"select",31)(3,"option",8),o(4,"Clothes"),e(),i(5,"option",9),o(6,"Phones"),e(),i(7,"option",10),o(8,"TV"),e(),i(9,"option",11),o(10,"Shoes"),e(),i(11,"option",12),o(12,"Food"),e()(),_(13,"input",32)(14,"input",33),e()),n&2){let r=a(2);y("formGroup",r.editForm)}}function ct(n,t){if(n&1){let r=F();i(0,"div",23)(1,"button",34),P("click",function(){x(r);let c=a().$implicit,l=a();return v(l.editProduct(c))}),o(2,"Edit"),e(),i(3,"button",35),P("click",function(){x(r);let c=a().$implicit,l=a();return v(l.deleteProduct(c.id))}),o(4,"Delete"),e()()}}function ut(n,t){if(n&1){let r=F();i(0,"div",24)(1,"button",36),P("click",function(){x(r);let c=a().$implicit,l=a();return v(l.submitEditInAPI(c.id))}),o(2,"Submit"),e()()}}function lt(n,t){if(n&1&&(i(0,"div",19)(1,"div",20),s(2,nt,13,4,"div",21)(3,dt,15,1,"div",22),s(4,ct,5,0,"div",23)(5,ut,3,0,"div",24),e()()),n&2){let r=t.$implicit,d=a();u(2),b(d.editingProductId!==r.id?2:d.editingProductId===r.id?3:-1),u(2),b(d.editingProductId!==r.id?4:5)}}function at(n,t){n&1&&(i(0,"h1"),o(1,"There are no products \u{1F605}"),e())}var Y=class n{constructor(t){this._ProductServices=t}_PLATFORM_ID=k(R);userID;productData=T([]);showEditInputs=!1;editingProductId=null;productCRUDForm=new D({productName:new p(null,[m.required]),productCategory:new p(null,[m.required]),productPrice:new p(null,[m.required]),productStock:new p(null,m.required)});editForm=new D({productName:new p("",m.required),productCategory:new p("",m.required),productPrice:new p("",m.required),productStock:new p("",m.required)});productSub;addProductSub;editProductSub;deleteProductSub;addProduct(){let t=I(h({},this.productCRUDForm.value),{userId:this.userID});this.addProductSub=this._ProductServices.addProduct(t).subscribe({next:r=>{console.log(r),this.productData.update(d=>[...d,r]),this.productCRUDForm.reset()},error:r=>{console.log(r)}})}editProduct(t){this.editingProductId=t.id,this.editForm.setValue({productName:t.productName,productCategory:t.productCategory,productPrice:t.productPrice,productStock:t.productStock})}submitEditInAPI(t){let r=I(h({},this.editForm.value),{id:t,userId:this.userID});this.editProductSub=this._ProductServices.updateProduct(t,r).subscribe({next:d=>{this.productData.update(c=>c.map(l=>l.id===t?d:l)),this.editingProductId=null},error:d=>{console.log(d)}})}deleteProduct(t){this.deleteProductSub=this._ProductServices.deleteProduct(t).subscribe({next:r=>{console.log(r),this.productData.update(d=>d.filter(c=>c.id!==t))},error:r=>{console.log(r)}})}ngOnInit(){G(this._PLATFORM_ID)&&(this.userID=sessionStorage.getItem("userID")?.toString()),this.productSub=this._ProductServices.getProducts(this.userID).subscribe({next:t=>{this.productData.set(t)},error:t=>console.log(t)})}ngOnDestroy(){this.productSub?.unsubscribe(),this.addProductSub?.unsubscribe(),this.editProductSub?.unsubscribe(),this.deleteProductSub?.unsubscribe()}static \u0275fac=function(r){return new(r||n)(U(E))};static \u0275cmp=V({type:n,selectors:[["app-products"]],decls:38,vars:7,consts:[[1,"container","py-5"],[3,"ngSubmit","formGroup"],[1,"mb-3","border-bottom","border-3","pb-3"],["for","productName",1,"form-label"],["formControlName","productName","type","text","id","productName","aria-describedby","product Input",1,"form-control"],[1,"fw-semibold","bg-warning","text-danger","mt-2","rounded-2","p-1"],["for","productCategory",1,"form-label"],["formControlName","productCategory","id","productCategory",1,"ms-2","rounded-xl"],["value","Clothes"],["value","Phone"],["value","TV"],["value","Shoes"],["value","Food"],["for","productPrice",1,"form-label"],["formControlName","productPrice","type","number","id","productPrice","aria-describedby","productPrice",1,"form-control"],["for","productStock",1,"form-label"],["formControlName","productStock","type","number","id","productStock","aria-describedby","productStock",1,"form-control"],["type","submit",1,"btn","subButt",3,"disabled"],["id","Products",1,"row","mt-5","gy-3"],[1,"outContainer","col-xl-3","py-4"],[1,"box","p-3","rounded-2","text-center"],[1,"data"],[1,"editInputs",3,"formGroup"],[1,"buttons","d-flex","justify-content-between"],[1,"button"],[1,"title"],[1,"categroy"],[1,"fs-6"],[1,"price","m-0","fs-3"],[1,"stock","fs-4","fw-semibold"],["formControlName","productName","type","text","id","productNameEdit","aria-describedby","Edit product Input Name",1,"form-control"],["formControlName","productCategory","id","productCategoryEdit",1,"my-2","rounded-xl"],["formControlName","productPrice","type","number","id","productPriceEdit","aria-describedby","Edit product Input Price",1,"form-control","my-2"],["formControlName","productStock","type","number","id","productStockEdit","aria-describedby","Edit product Input Stock",1,"form-control","my-2"],[1,"btn","bg-warning","fw-semibold",3,"click"],[1,"btn","bg-danger","fw-semibold",3,"click"],[1,"btn","subButt",3,"click"]],template:function(r,d){if(r&1&&(i(0,"section",0)(1,"form",1),P("ngSubmit",function(){return d.addProduct()}),i(2,"div",2)(3,"label",3),o(4,"The Product Name:"),e(),_(5,"input",4),s(6,et,2,0,"p",5),e(),i(7,"div",2)(8,"label",6),o(9,"The Product Category:"),e(),i(10,"select",7)(11,"option",8),o(12,"Clothes"),e(),i(13,"option",9),o(14,"Phones"),e(),i(15,"option",10),o(16,"TV"),e(),i(17,"option",11),o(18,"Shoes"),e(),i(19,"option",12),o(20,"Food"),e()(),s(21,rt,2,0,"p",5),e(),i(22,"div",2)(23,"label",13),o(24,"The Product Price:"),e(),_(25,"input",14),s(26,it,2,0,"p",5),e(),i(27,"div",2)(28,"label",15),o(29,"The Product Stock:"),e(),_(30,"input",16),s(31,ot,2,0,"p",5),e(),i(32,"button",17),o(33,"Submit"),e()(),i(34,"div",18),$(35,lt,6,2,"div",19,O,!1,at,2,0,"h1"),e()()),r&2){let c,l,C,g;u(),y("formGroup",d.productCRUDForm),u(5),b((c=d.productCRUDForm.get("productName"))!=null&&c.getError("required")&&((c=d.productCRUDForm.get("productName"))!=null&&c.touched)?6:-1),u(15),b((l=d.productCRUDForm.get("productCategory"))!=null&&l.getError("required")&&((l=d.productCRUDForm.get("productCategory"))!=null&&l.touched)?21:-1),u(5),b((C=d.productCRUDForm.get("productPrice"))!=null&&C.getError("required")&&((C=d.productCRUDForm.get("productPrice"))!=null&&C.touched)?26:-1),u(5),b((g=d.productCRUDForm.get("productStock"))!=null&&g.getError("required")&&((g=d.productCRUDForm.get("productStock"))!=null&&g.touched)?31:-1),u(),y("disabled",d.productCRUDForm.invalid),u(3),q(d.productData())}},dependencies:[X,B,Q,W,H,L,K,M,j,z,J],encapsulation:2})};export{Y as Products};
