import{a as B,b as d,c as M,d as A,e as w,f as u,g as R,i as U,j as L,n as z}from"./chunk-A25HTZXZ.js";import{a as f}from"./chunk-LGQEV6BK.js";import{l as H,m as j}from"./chunk-MJ7E4EBO.js";import{$ as x,Ha as a,Hb as m,Ib as S,Na as V,P as D,Sa as $,T as N,U as T,_ as v,a as I,b as h,ga as P,ib as c,jb as y,kb as k,lb as q,mb as G,nb as b,ob as r,pb as n,qa as O,qb as E,wb as F,yb as _,zb as s}from"./chunk-DCIY6CH7.js";var C=class i{constructor(e){this._HttpClient=e}getEmployee(e){return this._HttpClient.get(`${f.apiUrl}/employees?userId=${e}`)}addEmployee(e){return this._HttpClient.post(`${f.apiUrl}/employees`,e)}editEmployee(e,t){return this._HttpClient.put(`${f.apiUrl}/employees/${e}`,t)}deleteEmployee(e){return this._HttpClient.delete(`${f.apiUrl}/employees/${e}`)}static \u0275fac=function(t){return new(t||i)(N(j))};static \u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"})};function W(i,e){i&1&&(r(0,"p",5),m(1,"*Employee Name Is Empty"),n())}function X(i,e){i&1&&(r(0,"p",5),m(1,"*Employee Email Is Empty"),n())}function Y(i,e){i&1&&(r(0,"p",5),m(1,"*Employee Position Is Empty"),n())}function Z(i,e){if(i&1){let t=F();r(0,"div",15),E(1,"input",16)(2,"input",17)(3,"input",18),n(),r(4,"div",19)(5,"button",20),_("click",function(){v(t);let l=s().$implicit,p=s();return x(p.submitButtInAPI(l.id))}),m(6,"Submit"),n()()}if(i&2){let t=s(2);b("formGroup",t.editForm),a(5),b("disabled",t.editForm.invalid)}}function ee(i,e){if(i&1){let t=F();r(0,"div",21)(1,"h2",22),m(2),n(),r(3,"h4"),m(4),n(),r(5,"p",23),m(6),n()(),r(7,"div",24)(8,"button",25),_("click",function(){v(t);let l=s().$implicit,p=s();return x(p.editEmployee(l))}),m(9,"Edit"),n(),r(10,"button",26),_("click",function(){v(t);let l=s().$implicit,p=s();return x(p.deleteEmployee(l.id))}),m(11,"Delete"),n()()}if(i&2){let t=s().$implicit;a(2),S(t.name),a(2),S(t.position),a(2),S(t.email)}}function te(i,e){if(i&1&&(r(0,"div",12)(1,"div",14),c(2,Z,7,2)(3,ee,12,3),n()()),i&2){let t=e.$implicit,o=s();a(2),y(t.id===o.editingEmployeeID?2:3)}}function ie(i,e){i&1&&(r(0,"h1",13),m(1,"No Employees"),n())}var J=class i{constructor(e){this._EmployeeService=e}_PLATFORM_ID=T(O);userID;employeesData=P([]);editingEmployeeID=null;inputForm=new w({name:new u(null,[d.required]),email:new u(null,[d.required]),position:new u(null,[d.required])});editForm=new w({name:new u(null,[d.required]),email:new u(null,[d.required]),position:new u(null,[d.required])});getEmployeeSub;addEmployeeSub;editEmployeeSub;deleteEmployeeSub;addEmployee(){let e=h(I({},this.inputForm.value),{userId:this.userID});this.addEmployeeSub=this._EmployeeService.addEmployee(e).subscribe({next:t=>{this.employeesData.update(o=>[...o,t]),this.inputForm.reset()},error:t=>console.log(t)})}editEmployee(e){this.editingEmployeeID=e.id,this.editForm.setValue({name:e.name,email:e.email,position:e.position})}submitButtInAPI(e){let t=h(I({},this.editForm.value),{id:e,userId:this.userID});this.editEmployeeSub=this._EmployeeService.editEmployee(e,t).subscribe({next:o=>{this.employeesData.update(l=>l.map(p=>p.id===e?o:p)),this.editingEmployeeID=null},error:o=>console.log(o)})}deleteEmployee(e){this.deleteEmployeeSub=this._EmployeeService.deleteEmployee(e).subscribe({next:t=>{this.employeesData.update(o=>o.filter(l=>l.id!==e))}})}ngOnInit(){H(this._PLATFORM_ID)&&(this.userID=sessionStorage.getItem("userID")?.toString()),this.getEmployeeSub=this._EmployeeService.getEmployee(this.userID).subscribe({next:e=>this.employeesData.set(e),error:e=>console.log(e)})}ngOnDestroy(){this.getEmployeeSub?.unsubscribe(),this.addEmployeeSub?.unsubscribe(),this.editEmployeeSub?.unsubscribe(),this.deleteEmployeeSub?.unsubscribe()}static \u0275fac=function(t){return new(t||i)(V(C))};static \u0275cmp=$({type:i,selectors:[["app-employees"]],decls:23,vars:6,consts:[[1,"container","py-5"],[3,"ngSubmit","formGroup"],[1,"mb-3","border-bottom","border-3","pb-3"],["for","employeeName",1,"form-label"],["formControlName","name","type","text","id","employeeName","aria-describedby","Employee Name Input",1,"form-control"],[1,"fw-semibold","bg-warning","text-danger","mt-2","rounded-2","p-1"],["for","employeeEmail",1,"form-label"],["formControlName","email","type","email","id","employeeEmail","aria-describedby","Employee Email Input",1,"form-control"],["for","employeePosition",1,"form-label"],["formControlName","position","type","text","id","employeePosition","aria-describedby","Employee Position Input",1,"form-control"],["type","submit",1,"btn","subButt",3,"disabled"],[1,"row","outContainer","py-3","my-5","rounded-3","gy-3"],[1,"col-xl-3"],[1,"text-main"],[1,"box","p-3","text-center"],[1,"editInputs",3,"formGroup"],["formControlName","name","type","text","id","employeeName","aria-describedby","Employee name Input",1,"form-control","my-2"],["formControlName","position","type","text","id","employeePosition","aria-describedby","Employee Positon Input",1,"form-control","my-2"],["formControlName","email","type","email","id","employeeEmail","aria-describedby","Employee Email Input",1,"form-control","my-2"],[1,"submitButton"],[1,"btn","subButt","mt-3",3,"click","disabled"],[1,"data"],[1,"fw-bold"],[1,"fw-semibold"],[1,"buttons","d-flex","justify-content-between"],[1,"bg-warning","text-white","btn",3,"click"],[1,"bg-danger","text-white","btn",3,"click"]],template:function(t,o){if(t&1&&(r(0,"section",0)(1,"form",1),_("ngSubmit",function(){return o.addEmployee()}),r(2,"div",2)(3,"label",3),m(4,"Employee Name:"),n(),E(5,"input",4),c(6,W,2,0,"p",5),n(),r(7,"div",2)(8,"label",6),m(9,"Employee Email:"),n(),E(10,"input",7),c(11,X,2,0,"p",5),n(),r(12,"div",2)(13,"label",8),m(14,"Employee Position:"),n(),E(15,"input",9),c(16,Y,2,0,"p",5),n(),r(17,"button",10),m(18,"Submit"),n()(),r(19,"div",11),q(20,te,4,1,"div",12,k,!1,ie,2,0,"h1",13),n()()),t&2){let l,p,g;a(),b("formGroup",o.inputForm),a(5),y((l=o.inputForm.get("name"))!=null&&l.getError("required")&&((l=o.inputForm.get("name"))!=null&&l.touched)?6:-1),a(5),y((p=o.inputForm.get("email"))!=null&&p.getError("required")&&((p=o.inputForm.get("email"))!=null&&p.touched)?11:-1),a(5),y((g=o.inputForm.get("position"))!=null&&g.getError("required")&&((g=o.inputForm.get("position"))!=null&&g.touched)?16:-1),a(),b("disabled",o.inputForm.invalid),a(3),G(o.employeesData())}},dependencies:[z,R,B,M,A,U,L],encapsulation:2})};export{J as Employees};
